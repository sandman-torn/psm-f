import{_}from"./AdminLayout-BLa_T61k.js";import{_ as h}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CAZljUpU.js";import{z as f,q as b,r as x,a as m,c as y,b as t,t as o,d as w,l as u,D as v,S as c,e as g,o as $,f as p,w as P,g as R}from"./index-X9mIgHB-.js";import"./Backdrop.vue_vue_type_script_setup_true_lang-UdUIDiPX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ePNJevent-BmfCIqR1.js";const D={key:0},T={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},j={class:"flex flex-col gap-5 xl:flex-row xl:items-center xl:justify-between"},S={class:"flex flex-col items-center w-full gap-6 xl:flex-row"},B={class:"order-3 xl:order-2"},C={class:"mb-2 text-lg font-semibold text-center text-gray-800 dark:text-white/90 xl:text-left"},K={class:"flex flex-col items-center gap-1 text-center xl:flex-row xl:gap-3 xl:text-left"},L={class:"text-sm text-gray-500 dark:text-gray-400"},q={class:"flex flex-col items-center gap-1 text-center xl:flex-row xl:gap-3 xl:text-left"},A={class:"text-sm text-gray-500 dark:text-gray-400"},M={__name:"ProfileCardProgramDaftarKehadiranPeserta",props:{program:{type:Object,required:!0}},setup(a){const n=f(),l=n.query.date,s=b(()=>{if(!l)return"";const r=new Date(l),e=String(r.getDate()).padStart(2,"0"),i=String(r.getMonth()+1).padStart(2,"0"),d=r.getFullYear();return`${e}/${i}/${d}`});return n.params.id,x(!1),(r,e)=>a.program?(m(),y("div",D,[t("div",T,[t("div",j,[t("div",S,[t("div",B,[t("h4",C,o(a.program.program_name),1),t("div",K,[t("p",L,[e[0]||(e[0]=w(" Tarikh: ")),t("strong",null,o(s.value),1)])]),t("div",q,[t("p",A,o(a.program.program_desc),1)])])])])])])):u("",!0)}},U={key:0},V={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},N={class:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between"},E={class:"grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-7 2xl:gap-x-32"},F={class:"text-sm font-medium text-gray-800 dark:text-white/90"},O={class:"text-sm font-medium text-gray-800 dark:text-white/90"},I={class:"text-sm font-medium text-gray-800 dark:text-white/90"},z={class:"text-sm font-medium text-gray-800 dark:text-white/90"},G={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Y={class:"text-sm font-medium text-gray-800 dark:text-white/90"},H={class:"mt-4 flex justify-between items-center w-full"},J={__name:"PersonalInfoCardProgramDaftarKehadiranPeserta",props:{program:{type:Object,required:!0}},setup(a){const n=v(),l=f(),s=async r=>{const e=l.query.date;if(!e){c.fire("Ralat","Tarikh tidak dijumpai dalam URL.","error");return}try{await g.get("/sanctum/csrf-cookie");const d=(await g.get("/api/user",{withCredentials:!0})).data;if(console.log("USER DATA:",d),(await g.get(`/api/attendance/${r}?date=${e}`)).data.find(k=>k.user_id===d.id)){c.fire("Makluman","Anda telah mendaftar kehadiran untuk program ini.","info");return}await g.post("/api/attendance/manual",{program_id:r,date:e,user_id:d.id,is_present:1},{withCredentials:!0}),c.fire("Berjaya","Kehadiran anda telah direkodkan!","success"),n.push("/dashboard")}catch(i){console.error("FULL ERROR:",i),c.fire("Ralat","Gagal merekodkan kehadiran. Sila cuba lagi.","error")}};return x(!1),(r,e)=>a.program?(m(),y("div",U,[t("div",V,[t("div",N,[t("div",null,[e[7]||(e[7]=t("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-6"}," Maklumat Terperinci ",-1)),t("div",E,[t("div",null,[e[1]||(e[1]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Tarikh Mula ",-1)),t("p",F,o(a.program.date_from_display),1)]),t("div",null,[e[2]||(e[2]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Tarikh Tamat ",-1)),t("p",O,o(a.program.date_to_display),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"Lokasi",-1)),t("p",I,o(a.program.location),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Kuota peserta ",-1)),t("p",z,o(a.program.url),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Pegawai Bertanggungjawab ",-1)),t("p",G,o(a.program.created_by_name),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Unit Bertanggungjawab ",-1)),t("p",Y,o(a.program.by_unit_name),1)])])])])]),t("div",H,[t("button",{onClick:e[0]||(e[0]=i=>s(a.program.id)),class:"px-4 py-3 text-sm font-medium text-white transition rounded-lg bg-green-600 hover:bg-green-700"}," Daftar ")])])):u("",!0)}},Q={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6"},nt={__name:"ViewProgramDaftarKehadiranPeserta",setup(a){const n=x("Program"),l=f(),s=x(null);return $(async()=>{const r=l.params.id;console.log("userId:",r);try{const e=await g.get(`/api/programs/${r}`);console.log("programRes:",e),s.value=e.data}catch(e){console.error(e)}}),(r,e)=>(m(),p(_,null,{default:P(()=>[R(h,{pageTitle:n.value},null,8,["pageTitle"]),t("div",Q,[e[0]||(e[0]=t("h3",{class:"mb-5 text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-7"},"Pendaftaran Kehadiran Program",-1)),s.value?(m(),p(M,{key:0,program:s.value},null,8,["program"])):u("",!0),s.value?(m(),p(J,{key:1,program:s.value},null,8,["program"])):u("",!0)])]),_:1}))}};export{nt as default};
