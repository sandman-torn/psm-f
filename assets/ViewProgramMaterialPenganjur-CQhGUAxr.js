import{_ as j}from"./AdminLayoutPenganjur-9cndhfyN.js";import{_ as P}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-Bm2K1jX0.js";import{z as _,r as g,a as d,c,b as t,t as l,l as m,B as T,i as C,y as N,F as S,k as V,e as p,S as x,o as I,f as b,w,g as v,d as q,h as B}from"./index-akeXVEdY.js";import"./Backdrop.vue_vue_type_script_setup_true_lang-Dkk3c35f.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ePNJevent-BmfCIqR1.js";const D={key:0},F={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},R={class:"flex flex-col gap-5 xl:flex-row xl:items-center xl:justify-between"},U={class:"flex flex-col items-center w-full gap-6 xl:flex-row"},G={class:"order-3 xl:order-2"},K={class:"mb-2 text-lg font-semibold text-center text-gray-800 dark:text-white/90 xl:text-left"},L={class:"w-[500px] flex flex-col items-center gap-1 text-center xl:flex-row xl:gap-3 xl:text-left"},O={class:"text-sm text-gray-500 dark:text-gray-400 mb-2"},z={__name:"ProfileCardProgramMaterialPenganjur",props:{program:{type:Object,required:!0}},setup(o){return _().params.id,g(!1),(u,r)=>o.program?(d(),c("div",D,[t("div",F,[t("div",R,[t("div",U,[t("div",G,[t("h4",K,l(o.program.program_name),1),t("div",L,[t("div",null,[t("p",O,l(o.program.program_desc),1)])])])])])])])):m("",!0)}},A={key:0},E={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},Y={class:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between"},H={class:"grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-7 2xl:gap-x-32"},J={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Q={class:"text-sm font-medium text-gray-800 dark:text-white/90"},W={class:"text-sm font-medium text-gray-800 dark:text-white/90"},X={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Z={class:"text-sm font-medium text-gray-800 dark:text-white/90"},tt={class:"text-sm font-medium text-gray-800 dark:text-white/90"},et={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},at={class:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between"},rt={key:0,class:"mt-6"},st={class:"text-sm text-gray-800 dark:text-white/90 table-auto border border-gray-300 w-full"},ot={class:"border px-4 py-2"},lt={class:"border px-4 py-2"},nt={class:"border px-4 py-2"},dt=["href"],it={class:"border px-4 py-2"},gt=["onClick"],mt={__name:"PersonalInfoCardProgramMaterialPenganjur",props:{programId:Number,program:{type:Object,required:!0}},setup(o){const u=_().params.id;g(!1);const r=g(""),i=g(null),s=g([]),f=n=>{i.value=n.target.files[0]},h=async()=>{var n,e;try{await p.get("/sanctum/csrf-cookie");const a=new FormData;a.append("program_id",u),a.append("material_name",r.value),a.append("file",i.value),await p.post("/api/materials",a),x.fire({icon:"success",title:"Berjaya!",text:"Bahan berjaya dimuat naik.",timer:2e3,showConfirmButton:!0}),r.value="",i.value=null,k()}catch(a){console.error("Upload gagal:",a.response.data),x.fire({icon:"error",title:"Ralat",text:((e=(n=a.response)==null?void 0:n.data)==null?void 0:e.message)||"Gagal muat naik bahan."})}},k=async()=>{const n=await p.get(`/api/materials/${u}`);s.value=n.data},$=async n=>{if((await x.fire({title:"Padam Bahan?",text:"Adakah anda pasti ingin memadam bahan ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, padam",cancelButtonText:"Batal"})).isConfirmed)try{await p.delete(`/api/materials/${n}`),await k(),x.fire({icon:"success",title:"Berjaya!",text:"Bahan berjaya dipadam.",showConfirmButton:!0})}catch{x.fire({icon:"error",title:"Ralat",text:"Gagal memadam bahan. Sila cuba lagi."})}};return k(),(n,e)=>o.program?(d(),c("div",A,[t("div",E,[t("div",Y,[t("div",null,[e[7]||(e[7]=t("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-6"}," Maklumat Terperinci ",-1)),t("div",H,[t("div",null,[e[1]||(e[1]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Tarikh Mula ",-1)),t("p",J,l(o.program.date_from_display),1)]),t("div",null,[e[2]||(e[2]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Tarikh Tamat ",-1)),t("p",Q,l(o.program.date_to_display),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"Lokasi",-1)),t("p",W,l(o.program.location),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Kuota peserta ",-1)),t("p",X,l(o.program.url),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Pegawai Bertanggungjawab ",-1)),t("p",Z,l(o.program.created_by_name),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Unit Bertanggungjawab ",-1)),t("p",tt,l(o.program.by_unit_name),1)])])])])]),t("div",et,[t("div",at,[t("div",null,[e[12]||(e[12]=t("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-6"}," Muat Naik Bahan Program ",-1)),t("div",null,[e[11]||(e[11]=t("h2",{class:"text-m font-semibold text-gray-800 dark:text-white/90 lg:mb-2"},"Sila Muat Naik Bahan",-1)),t("form",{onSubmit:T(h,["prevent"]),class:"space-y-3"},[C(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),placeholder:"Tajuk Bahan",required:"",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[N,r.value]]),t("input",{type:"file",onChange:f,required:"",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,32),e[8]||(e[8]=t("button",{type:"submit",class:"px-4 py-3 text-sm font-medium text-white transition rounded-lg bg-green-600 hover:bg-green-700"},"Muat Naik",-1))],32),s.value.length?(d(),c("div",rt,[e[10]||(e[10]=t("h2",{class:"text-m font-semibold text-gray-800 dark:text-white/90 lg:mb-2"},"Senarai Bahan",-1)),t("div",null,[t("table",st,[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",{class:"border px-4 py-2"},"No"),t("th",{class:"border px-4 py-2"},"Nama Bahan"),t("th",{class:"border px-4 py-2"},"Muat Turun"),t("th",{class:"border px-4 py-2"},"Tindakan")])],-1)),t("tbody",null,[(d(!0),c(S,null,V(s.value,(a,M)=>(d(),c("tr",{key:a.id},[t("td",ot,l(M+1),1),t("td",lt,l(a.material_name),1),t("td",nt,[t("a",{href:`http://psm-b.test/storage/${a.file_url}`,target:"_blank",class:"text-blue-600 underline"},"Muat Turun",8,dt)]),t("td",it,[t("button",{class:"bg-red-600 hover:bg-red-700 text-white text-sm font-medium px-3 py-1 rounded",onClick:ct=>$(a.id)}," Padam ",8,gt)])]))),128))])])])])):m("",!0)])])])])])):m("",!0)}},ut={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6"},xt={class:"mt-4 flex justify-end items-center w-full"},_t={__name:"ViewProgramMaterialPenganjur",setup(o){const y=g("Program"),u=_(),r=g(null);return I(async()=>{const i=u.params.id;console.log("userId:",i);try{const s=await p.get(`/api/programs/${i}`);console.log("programRes:",s),r.value=s.data}catch(s){console.error(s)}}),(i,s)=>{const f=B("personal-info-card-senarai-peserta"),h=B("router-link");return d(),b(j,null,{default:w(()=>[v(P,{pageTitle:y.value},null,8,["pageTitle"]),t("div",ut,[s[1]||(s[1]=t("h3",{class:"mb-5 text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-7"}," Maklumat Program ",-1)),r.value?(d(),b(z,{key:0,program:r.value},null,8,["program"])):m("",!0),r.value?(d(),b(mt,{key:1,program:r.value},null,8,["program"])):m("",!0),r.value?(d(),b(f,{key:2,program:r.value},null,8,["program"])):m("",!0),t("div",xt,[v(h,{to:"/senarai-program-muat-naik-bahan",class:"px-4 py-3 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition"},{default:w(()=>s[0]||(s[0]=[q(" Kembali ")])),_:1})])])]),_:1})}}};export{_t as default};
