import{_ as C}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CAZljUpU.js";import{_ as $}from"./AdminLayoutPenganjur-Du1UZDya.js";import{_ as V}from"./ComponentCard.vue_vue_type_script_setup_true_lang-DLpq3fz9.js";import{U as N,V as U,r as h,q as P,o as F,a as r,c as n,b as t,g as d,w as c,d as m,u as x,R as f,F as p,k as T,t as i,n as L,S as _,e as B,f as M}from"./index-X9mIgHB-.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Backdrop.vue_vue_type_script_setup_true_lang-UdUIDiPX.js";import"./ePNJevent-BmfCIqR1.js";const A={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},D={class:"max-w-full overflow-x-auto custom-scrollbar"},q={class:"flex justify-end mt-6 mb-4 mr-4"},z={class:"min-w-full"},E={class:"divide-y divide-gray-200 dark:divide-gray-700"},G={class:"px-5 py-4 sm:px-6"},I={class:"flex items-center gap-3"},K={class:"block font-medium text-gray-800 text-theme-sm dark:text-white/90"},O={class:"px-5 py-4 sm:px-6"},Y={class:"text-gray-500 text-theme-sm dark:text-gray-400"},H={class:"px-5 py-4 sm:px-6"},J={class:"text-gray-500 text-theme-sm dark:text-gray-400"},Q={class:"px-5 py-4 sm:px-6"},W={class:"text-gray-500 text-theme-sm dark:text-gray-400"},X={class:"px-5 py-4 sm:px-6"},Z={class:"text-center text-gray-500 text-theme-sm dark:text-gray-400"},tt={class:"px-5 py-4 sm:px-6"},et={class:"flex gap-2"},at=["onClick"],st={class:"flex justify-center mt-4 mb-6 gap-2"},rt=["disabled"],ot=["onClick"],nt=["disabled"],b=10,it={__name:"SenaraiProgramPenganjur",setup(S){N();const u=U(),v=async s=>{if((await _.fire({title:"Adakah anda pasti?",text:"Program ini akan dipadam.",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, padam!",cancelButtonText:"Batal"})).isConfirmed)try{await B.delete(`/api/programs/${s}`),_.fire("Berjaya!","Program telah dipadam.","success"),w()}catch(a){console.error(a),_.fire("Ralat","Gagal memadam program.","error")}},l=h([]),o=h(1),j=P(()=>{const s=(o.value-1)*b;return l.value.slice(s,s+b)}),g=P(()=>Math.ceil(l.value.length/b)),y=s=>{s>=1&&s<=g.value&&(o.value=s)},w=async()=>{try{const s=await B.get("/api/programs");l.value=s.data,console.log("Fetched programs:",l.value)}catch(s){console.error("Failed to fetch programs:",s)}};return F(()=>{w(),u.fetchUser()}),(s,e)=>(r(),n("div",A,[t("div",D,[t("div",q,[d(x(f),{to:{name:"Tambah Program"},class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded"},{default:c(()=>e[2]||(e[2]=[m(" Tambah Program ")])),_:1})]),t("table",z,[e[8]||(e[8]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left w-3/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Nama Program")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Lokasi")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Tarikh Mula")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Tarikh Tamat")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"}," Pegawai Bertanggungjawab ")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Tindakan")])])],-1)),t("tbody",E,[(r(!0),n(p,null,T(j.value,(a,k)=>(r(),n("tr",{key:k,class:"border-t border-gray-100 dark:border-gray-800"},[t("td",G,[t("div",I,[t("div",null,[t("span",K,i(a.program_name),1)])])]),t("td",O,[t("p",Y,i(a.location),1)]),t("td",H,[t("p",J,i(a.date_from_display),1)]),t("td",Q,[t("p",W,i(a.date_to_display),1)]),t("td",X,[t("p",Z,[m(i(a.created_by_name),1),e[3]||(e[3]=t("br",null,null,-1)),m(" ["+i(a.by_unit_name)+"] ",1)])]),t("td",tt,[t("div",et,[d(x(f),{to:{name:"View Program Penganjur",params:{id:a.id}},class:"inline-flex items-center justify-center rounded-md border border-transparent bg-yellow-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 sm:w-auto"},{default:c(()=>e[4]||(e[4]=[m(" Lihat ")])),_:2},1032,["to"]),String(a.by_unit)===String(x(u).user.unit_id)?(r(),n(p,{key:0},[d(x(f),{to:{name:"Borang Kemaskini Program.edit",params:{id:a.id}},class:"inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto"},{default:c(()=>e[5]||(e[5]=[m(" Ubah ")])),_:2},1032,["to"]),t("button",{onClick:mt=>v(a.id),class:"bg-red-600 hover:bg-red-700 text-white text-sm font-medium px-3 py-1 rounded"}," Padam ",8,at)],64)):(r(),n(p,{key:1},[e[6]||(e[6]=t("span",{class:"inline-flex items-center justify-center rounded-md border border-transparent bg-blue-300 px-4 py-2 text-sm font-medium text-white opacity-50 cursor-not-allowed"}," Ubah ",-1)),e[7]||(e[7]=t("button",{class:"bg-red-300 text-white text-sm font-medium px-3 py-1 rounded opacity-50 cursor-not-allowed",disabled:""}," Padam ",-1))],64))])])]))),128))])]),t("div",st,[t("button",{onClick:e[0]||(e[0]=a=>y(o.value-1)),disabled:o.value===1,class:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"}," Prev ",8,rt),(r(!0),n(p,null,T(g.value,a=>(r(),n("button",{key:a,onClick:k=>y(a),class:L(["px-3 py-1 rounded",o.value===a?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"])},i(a),11,ot))),128)),t("button",{onClick:e[1]||(e[1]=a=>y(o.value+1)),disabled:o.value===g.value,class:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"}," Next ",8,nt)])])]))}},dt=R(it,[["__scopeId","data-v-2b3f9ff4"]]),lt={class:"space-y-5 sm:space-y-6"},_t={__name:"ViewSenaraiProgramPenganjur",setup(S){const u=h("Senarai Program");return(v,l)=>(r(),M($,null,{default:c(()=>[d(C,{pageTitle:u.value},null,8,["pageTitle"]),t("div",lt,[d(V,{title:"Senarai Program"},{default:c(()=>[d(dt)]),_:1})])]),_:1}))}};export{_t as default};
