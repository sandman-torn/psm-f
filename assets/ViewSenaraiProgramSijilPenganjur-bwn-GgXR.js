import{_ as T}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CAZljUpU.js";import{_ as j}from"./AdminLayoutPenganjur-Du1UZDya.js";import{_ as $}from"./ComponentCard.vue_vue_type_script_setup_true_lang-DLpq3fz9.js";import{U as N,V as B,r as g,q as y,o as V,a as i,c as n,b as t,F as f,k as h,t as l,d as b,u as F,l as M,n as A,e as v,S as U,f as G,w as k,g as x}from"./index-X9mIgHB-.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Backdrop.vue_vue_type_script_setup_true_lang-UdUIDiPX.js";import"./ePNJevent-BmfCIqR1.js";const q={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},z={class:"max-w-full overflow-x-auto custom-scrollbar"},D={class:"min-w-full"},E={class:"divide-y divide-gray-200 dark:divide-gray-700"},O={class:"px-5 py-4 sm:px-6"},R={class:"flex items-center gap-3"},H={class:"block font-medium text-gray-800 text-theme-sm dark:text-white/90"},I={class:"px-5 py-4 sm:px-6"},J={class:"text-gray-500 text-theme-sm dark:text-gray-400"},K={class:"px-5 py-4 sm:px-6"},Q={class:"text-gray-500 text-theme-sm dark:text-gray-400"},W={class:"px-5 py-4 sm:px-6"},X={class:"text-gray-500 text-theme-sm dark:text-gray-400"},Y={class:"px-5 py-4 sm:px-6"},Z={class:"text-center text-gray-500 text-theme-sm dark:text-gray-400"},tt={class:"px-5 py-4 sm:px-6"},et={class:"flex gap-2"},st={key:0,class:"flex gap-2 items-center"},at={class:"relative inline-flex items-center cursor-pointer"},rt=["checked","onChange"],ot={class:"text-sm text-gray-600 ml-2"},lt={class:"flex justify-center mt-4 mb-6 gap-2"},it=["disabled"],nt=["onClick"],ct=["disabled"],m=10,dt={__name:"SenaraiProgramSijilPenganjur",setup(w){N();const d=B(),r=g([]),o=g(1),S=y(()=>{const a=(o.value-1)*m;return r.value.slice(a,a+m)}),u=y(()=>Math.ceil(r.value.length/m)),p=a=>{a>=1&&a<=u.value&&(o.value=a)},C=async()=>{try{const a=await v.get("/api/programs");r.value=a.data,r.value=a.data.map(s=>({...s,isCertificate:Number(s.isCertificate)})),console.log("Fetched programs:",r.value)}catch(a){console.error("Failed to fetch programs:",a)}};V(()=>{C(),d.fetchUser(),console.log("Fetched programs:",r.value)});const P=async a=>{try{const e=(await v.put(`/api/programs/${a}/toggle-certificate`)).data.isCertificate,c=r.value.find(_=>_.id===a);c&&(c.isCertificate=e)}catch(s){console.error("Gagal menukar status sijil:",s),U.fire("Ralat","Gagal menukar status sijil.","error")}};return(a,s)=>(i(),n("div",q,[t("div",z,[t("table",D,[s[5]||(s[5]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left w-3/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Nama Program")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Lokasi")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Tarikh Mula")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Tarikh Tamat")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"}," Pegawai Bertanggungjawab ")]),t("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Status Muat Turun Sijil")])])],-1)),t("tbody",E,[(i(!0),n(f,null,h(S.value,(e,c)=>(i(),n("tr",{key:c,class:"border-t border-gray-100 dark:border-gray-800"},[t("td",O,[t("div",R,[t("div",null,[t("span",H,l(e.program_name),1)])])]),t("td",I,[t("p",J,l(e.location),1)]),t("td",K,[t("p",Q,l(e.date_from_display),1)]),t("td",W,[t("p",X,l(e.date_to_display),1)]),t("td",Y,[t("p",Z,[b(l(e.created_by_name),1),s[2]||(s[2]=t("br",null,null,-1)),b(" ["+l(e.by_unit_name)+"] ",1)])]),t("td",tt,[t("div",et,[String(e.by_unit)===String(F(d).user.unit_id)?(i(),n("div",st,[t("label",at,[t("input",{type:"checkbox",class:"sr-only peer",checked:e.isCertificate===1,onChange:_=>P(e.id)},null,40,rt),s[3]||(s[3]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 dark:bg-gray-700 rounded-full peer-checked:bg-green-500"},null,-1)),s[4]||(s[4]=t("div",{class:"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5"},null,-1))]),t("span",ot,l(e.isCertificate?"Aktif":"Tidak Aktif"),1)])):M("",!0)])])]))),128))])]),t("div",lt,[t("button",{onClick:s[0]||(s[0]=e=>p(o.value-1)),disabled:o.value===1,class:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"}," Prev ",8,it),(i(!0),n(f,null,h(u.value,e=>(i(),n("button",{key:e,onClick:c=>p(e),class:A(["px-3 py-1 rounded",o.value===e?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"])},l(e),11,nt))),128)),t("button",{onClick:s[1]||(s[1]=e=>p(o.value+1)),disabled:o.value===u.value,class:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"}," Next ",8,ct)])])]))}},ut=L(dt,[["__scopeId","data-v-60f346bc"]]),pt={class:"space-y-5 sm:space-y-6"},bt={__name:"ViewSenaraiProgramSijilPenganjur",setup(w){const d=g("Tetapan Status Muat Turun Sijil");return(r,o)=>(i(),G(j,null,{default:k(()=>[x(T,{pageTitle:d.value},null,8,["pageTitle"]),t("div",pt,[x($,{title:"Senarai Program"},{default:k(()=>[x(ut)]),_:1})])]),_:1}))}};export{bt as default};
