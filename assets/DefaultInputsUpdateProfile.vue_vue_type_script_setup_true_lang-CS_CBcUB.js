import{p as U,r as p,o as y,e as b,a as d,c as l,b as t,i as u,y as m,t as n,l as i,E as V,F as k,k as v,g as R,w as S,d as h,B as N,z as j,D as M,h as B,J as C,S as D}from"./index-akeXVEdY.js";const I={class:"space-y-6"},J={key:0,class:"mt-2 text-sm text-red-600"},A={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},E={class:"space-y-6"},T={key:0,class:"mt-2 text-sm text-red-600"},$={class:"space-y-6"},F={key:0,class:"mt-2 text-sm text-red-600"},K={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},L={class:"space-y-6"},z={key:0,class:"mt-2 text-sm text-red-600"},W={class:"space-y-6"},q={key:0},G=["value"],H={key:0,class:"text-sm text-red-600"},O={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Q={class:"space-y-6"},X={key:0,class:"mt-2 text-sm text-red-600"},Y={class:"space-y-6"},Z={key:0,class:"mt-2 text-sm text-red-600"},ee={class:"space-y-6"},te={class:"flex flex-col gap-2"},ae=["value"],re={key:0,class:"mt-2 text-sm text-red-600"},se={class:"mt-4 flex justify-between items-center w-full"},le=U({__name:"DefaultInputsUpdateProfile",setup(oe){const c=j();M();const a=p({name:"",ic_no:"",position:"",department:"",phone_no:"",email:"",password:"",password_confirmation:"",roles:[],unit_id:""}),s=p({}),f=[{id:1,role:"Peserta"},{id:2,role:"Penganjur"},{id:3,role:"Pentadbir Sistem"}];y(async()=>{const o=c.params.id;console.log("userId:",o);try{const e=await b.get(`/api/users/${o}`);console.log("userRes:",e),a.value.name=e.data.name,a.value.ic_no=e.data.ic_no,a.value.position=e.data.position,a.value.department=e.data.department,a.value.phone_no=e.data.phone_no,a.value.email=e.data.email,a.value.unit_id=e.data.unit_id,a.value.roles=e.data.roles.map(g=>g.id)}catch(e){console.error(e)}});const w=async()=>{s.value={};try{await b.get("/sanctum/csrf-cookie"),await b.put(`/api/users/${c.params.id}`,a.value),D.fire("Berjaya!","Pengguna telah dikemaskini.","success").then(()=>{window.location.reload()})}catch(o){o.response&&o.response.status===422&&(s.value=o.response.data.errors)}},x=p([]);y(async()=>{const o=await b.get("/api/units");x.value=o.data;const e=c.params.id;if(e){const g=await b.get(`/api/users/${e}`);a.value.unit_id=g.data.unit_id,a.value.roles=g.data.roles.map(r=>r.id)}}),p(!1),p(null),p(null);const _=()=>{const o=localStorage.getItem("authRole");return o==="Peserta"?"/dashboard":o==="Penganjur"?"/dashboardPenganjur":o==="Pentadbir"?"/dashboardPentadbir":"/"};return(o,e)=>{const g=B("router-link");return d(),l("div",I,[t("form",{onSubmit:N(w,["prevent"])},[t("div",null,[e[8]||(e[8]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Nama ",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>a.value.name=r),placeholder:"Ali bin Abdullah",class:"mb-4 dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[m,a.value.name]]),s.value.name?(d(),l("p",J,n(s.value.name[0]),1)):i("",!0)]),t("div",A,[t("div",E,[e[9]||(e[9]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," My Kad ",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=r=>a.value.ic_no=r),disabled:"",placeholder:"841112015403",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-gray-100 text-gray-400 px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[m,a.value.ic_no]]),s.value.ic_no?(d(),l("p",T,n(s.value.ic_no[0]),1)):i("",!0)]),t("div",$,[t("div",null,[e[10]||(e[10]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Jawatan ",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=r=>a.value.position=r),placeholder:"Penolong Akauntan W5",class:"mb-4 dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[m,a.value.position]]),s.value.position?(d(),l("p",F,n(s.value.position[0]),1)):i("",!0)])])]),t("div",K,[t("div",L,[e[11]||(e[11]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Jabatan ",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=r=>a.value.department=r),placeholder:"Perbendaharaan Negeri Johor",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[m,a.value.department]]),s.value.department?(d(),l("p",z,n(s.value.department[0]),1)):i("",!0)]),t("div",W,[a.value.roles.includes(2)?(d(),l("div",q,[e[13]||(e[13]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Unit",-1)),u(t("select",{"onUpdate:modelValue":e[4]||(e[4]=r=>a.value.unit_id=r),disabled:"",class:"mb-4 dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-gray-100 text-gray-400 px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},[e[12]||(e[12]=t("option",{value:""},"Pilih Unit",-1)),(d(!0),l(k,null,v(x.value,r=>(d(),l("option",{key:r.id,value:r.id},n(r.unit),9,G))),128))],512),[[V,a.value.unit_id]]),s.value.unit_id?(d(),l("p",H,n(s.value.unit_id[0]),1)):i("",!0)])):i("",!0)])]),t("div",O,[t("div",Q,[e[14]||(e[14]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," No Telefon ",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=r=>a.value.phone_no=r),placeholder:"019-7551234",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[m,a.value.phone_no]]),s.value.phone_no?(d(),l("p",X,n(s.value.phone_no[0]),1)):i("",!0)]),t("div",Y,[t("div",null,[e[15]||(e[15]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Emel ",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=r=>a.value.email=r),placeholder:"ali@johor.gov.my",class:"mb-4 dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[m,a.value.email]]),s.value.email?(d(),l("p",Z,n(s.value.email[0]),1)):i("",!0)])])]),t("div",ee,[t("div",te,[e[16]||(e[16]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Peranan ",-1)),(d(),l(k,null,v(f,r=>t("label",{key:r.id,class:"flex items-center text-gray-400 dark:text-white/40"},[u(t("input",{type:"checkbox",disabled:"",value:r.id,"onUpdate:modelValue":e[7]||(e[7]=P=>a.value.roles=P),class:"mr-2"},null,8,ae),[[C,a.value.roles]]),h(" "+n(r.role),1)])),64)),s.value.roles?(d(),l("p",re,n(s.value.roles[0]),1)):i("",!0)])]),t("div",se,[e[18]||(e[18]=t("button",{type:"submit",class:"px-4 py-3 text-sm font-medium text-white transition rounded-lg bg-green-600 hover:bg-green-700"}," Simpan ",-1)),R(g,{to:_(),class:"px-4 py-3 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition"},{default:S(()=>e[17]||(e[17]=[h(" Kembali ")])),_:1},8,["to"])])],32)])}}});export{le as _};
