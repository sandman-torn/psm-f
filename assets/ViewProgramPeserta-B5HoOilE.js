import{_ as T}from"./AdminLayout-CeB_FZ6j.js";import{_ as C}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-Bm2K1jX0.js";import{z as _,r as n,a as o,c as m,b as t,t as l,l as c,o as h,h as M,F as B,k as L,g as k,w as v,d as S,e as p,f}from"./index-akeXVEdY.js";import"./Backdrop.vue_vue_type_script_setup_true_lang-Dkk3c35f.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ePNJevent-BmfCIqR1.js";const N={key:0},E={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},V={class:"flex flex-col gap-5 xl:flex-row xl:items-center xl:justify-between"},I={class:"flex flex-col items-center w-full gap-6 xl:flex-row"},R={class:"order-3 xl:order-2"},D={class:"mb-2 text-lg font-semibold text-center text-gray-800 dark:text-white/90 xl:text-left"},K={class:"flex flex-col items-center gap-1 text-center xl:flex-row xl:gap-3 xl:text-left"},O={class:"text-sm text-gray-500 dark:text-gray-400"},U={__name:"ProfileCardProgramPeserta",props:{program:{type:Object,required:!0}},setup(a){return _().params.id,n(!1),(u,s)=>a.program?(o(),m("div",N,[t("div",E,[t("div",V,[t("div",I,[t("div",R,[t("h4",D,l(a.program.program_name),1),t("div",K,[t("p",O,l(a.program.program_desc),1)])])])])])])):c("",!0)}},q={key:0},A={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},F={class:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between"},G={class:"grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-7 2xl:gap-x-32"},H={class:"text-sm font-medium text-gray-800 dark:text-white/90"},z={class:"text-sm font-medium text-gray-800 dark:text-white/90"},J={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Q={class:"text-sm font-medium text-gray-800 dark:text-white/90"},W={class:"text-sm font-medium text-gray-800 dark:text-white/90"},X={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Y={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},Z={class:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between"},tt={key:0,class:"mt-6"},et={class:"text-sm text-gray-800 dark:text-white/90 table-auto border border-gray-300 w-full"},at={class:"border px-4 py-2"},rt={class:"border px-4 py-2"},st={class:"border px-4 py-2"},lt=["href"],ot={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},it={class:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between"},nt={class:"grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-7 2xl:gap-x-32"},dt={class:"mt-2"},gt={key:0},mt=["innerHTML"],ct=["disabled"],ut={class:"mt-4 flex justify-end items-center w-full"},xt={__name:"PersonalInfoCardProgramPeserta",props:{program:{type:Object,required:!0}},setup(a){n(!1);const d=n(!1),u=n(!0),s=n(""),g=a,w=_().params.id,$=async()=>{try{const r=await p.get(`/api/certificate/eligibility/${g.program.id}`,{withCredentials:!0});d.value=r.data.eligible,s.value=d.value?"Anda layak untuk menerima sijil penyertaan. <br> Sila cetak sijil.":`Anda tidak layak untuk menerima sijil penyertaan. <br>
     Kehadiran anda hanya ${r.data.attendedDays} dari ${r.data.totalDays} hari. <br>
     Sila hubungi admin.`}catch(r){console.error("Error checking eligibility:",r),s.value="Gagal menyemak kelayakan."}finally{u.value=!1}},j=async()=>{if(d.value)try{const r=await p.get(`/api/certificate/download/${g.program.id}`,{responseType:"blob",withCredentials:!0}),e=new Blob([r.data],{type:"application/pdf"}),x=document.createElement("a");x.href=URL.createObjectURL(e),x.download=`sijil-peserta-${g.program.id}.pdf`,x.click()}catch(r){console.error("Gagal muat turun sijil:",r)}};h($);const y=n([]);return(async()=>{const r=await p.get(`/api/materials/${w}`);y.value=r.data})(),(r,e)=>{const x=M("router-link");return a.program?(o(),m("div",q,[t("div",A,[t("div",F,[t("div",null,[e[6]||(e[6]=t("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-6"}," Maklumat Terperinci ",-1)),t("div",G,[t("div",null,[e[0]||(e[0]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Tarikh Mula ",-1)),t("p",H,l(a.program.date_from_display),1)]),t("div",null,[e[1]||(e[1]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Tarikh Tamat ",-1)),t("p",z,l(a.program.date_to_display),1)]),t("div",null,[e[2]||(e[2]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"Lokasi",-1)),t("p",J,l(a.program.location),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Kuota peserta ",-1)),t("p",Q,l(a.program.url),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Pegawai Bertanggungjawab ",-1)),t("p",W,l(a.program.created_by_name),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Unit Bertanggungjawab ",-1)),t("p",X,l(a.program.by_unit_name),1)])])])])]),t("div",Y,[t("div",Z,[t("div",null,[e[9]||(e[9]=t("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-6"}," Maklumat Bahan Program ",-1)),t("div",null,[y.value.length?(o(),m("div",tt,[e[8]||(e[8]=t("h2",{class:"text-m font-semibold text-gray-800 dark:text-white/90 lg:mb-2"},"Senarai Bahan",-1)),t("div",null,[t("table",et,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",{class:"border px-4 py-2"},"No"),t("th",{class:"border px-4 py-2"},"Nama Bahan"),t("th",{class:"border px-4 py-2"},"Muat Turun")])],-1)),t("tbody",null,[(o(!0),m(B,null,L(y.value,(b,P)=>(o(),m("tr",{key:b.id},[t("td",at,l(P+1),1),t("td",rt,l(b.material_name),1),t("td",st,[t("a",{href:`http://psm-b.test/storage/${b.file_url}`,target:"_blank",class:"text-blue-600 underline"},"Muat Turun",8,lt)])]))),128))])])])])):c("",!0)])])])]),t("div",ot,[t("div",it,[t("div",null,[e[11]||(e[11]=t("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-2"}," Sijil Penyertaan ",-1)),t("div",nt,[t("div",dt,[e[10]||(e[10]=t("p",{class:"mb-4 text-sm text-gray-600"}," Sijil akan dikeluarkan pada hari terakhir program ",-1)),a.program.isCertificate===1?(o(),m("div",gt,[t("p",{innerHTML:s.value,class:"mb-4 text-sm text-gray-600"},null,8,mt),t("button",{onClick:j,disabled:!d.value||u.value,class:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-50"}," Cetak Sijil ",8,ct)])):c("",!0)])])])])]),t("div",ut,[k(x,{to:"/senarai-program-peserta",class:"px-4 py-3 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition"},{default:v(()=>e[12]||(e[12]=[S(" Kembali ")])),_:1})])])):c("",!0)}}},pt={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6"},wt={__name:"ViewProgramPeserta",setup(a){const d=n("Program"),u=_(),s=n(null);return h(async()=>{const g=u.params.id;console.log("userId:",g);try{const i=await p.get(`/api/programs/${g}`);console.log("programRes:",i),s.value=i.data}catch(i){console.error(i)}}),(g,i)=>(o(),f(T,null,{default:v(()=>[k(C,{pageTitle:d.value},null,8,["pageTitle"]),t("div",pt,[i[0]||(i[0]=t("h3",{class:"mb-5 text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-7"},"Maklumat Program",-1)),s.value?(o(),f(U,{key:0,program:s.value},null,8,["program"])):c("",!0),s.value?(o(),f(xt,{key:1,program:s.value},null,8,["program"])):c("",!0)])]),_:1}))}};export{wt as default};
